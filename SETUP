#!/bin/bash

if [ "$1" ]; then
  if [ ! -e ./devices/$1 ]; then
    echo "$1 is not a valid device"
    exit 1
  fi
else
	echo "$1 is not a valid device"
	exit 1
fi

if [ -e ~/.config/device ]; then
  (cd ./devices/$1 && ./SETUP)
  exit 1
fi

echo $1 > ~/.config/device

(cd ./devices/$1 && ./SETUP first)