#!/bin/bash

if [ "$1" == "first" ]; then
	sudo cp ./etc/grub /etc/default/ && sudo update-grub2

	# not sure if these ones are necessary anymore
	# gsettings set org.gnome.desktop.peripherals.touchpad tap-to-click false
	# gsettings set org.gnome.desktop.peripherals.touchpad tap-and-drag false
	# gsettings set org.gnome.desktop.peripherals.touchpad speed 0.5

	# gsettings set org.gnome.desktop.interface scaling-factor 3
	# gsettings set org.gnome.desktop.interface text-scaling-factor 1.8
	# gsettings set org.gnome.desktop.background show-desktop-icons false

	(cd ~/Projects && git clone https://github.com/bulletmark/libinput-gestures.git)
	(cd ~/Projects/libinput-gestures && sudo make install && libinput-gestures-setup autostart)

  git config --global user.name  "fatlard1993"
  git config --global user.email "fatlard1993@gmail.com"

  cd ~/Projects && \
    git clone https://github.com/fatlard1993/swiss-army-knife && \
    git clone https://github.com/fatlard1993/symetrix-web-common && \
    git clone https://github.com/fatlard1993/touch-panel && \
    git clone https://github.com/fatlard1993/control-server && \
    git clone https://github.com/fatlard1993/control-server-mother-hub && \
    git clone https://github.com/fatlard1993/dsp-web-interface


  cd ~/Projects/swiss-army-knife && ./SETUP
  cd ~/Projects/symetrix-web-common && ./SETUP
  cd ~/Projects/touch-panel && ./SETUP
  cd ~/Projects/control-server && ./SETUP
  cd ~/Projects/control-server-mother-hub && ./SETUP
  cd ~/Projects/dsp-web-interface && ./SETUP

	if [ ! -e /etc/apt/sources.list.d/vscode.list ]; then
		# Install vscode prerequisites
		curl https://packages.microsoft.com/keys/microsoft.asc | gpg --dearmor > microsoft.gpg
		sudo mv microsoft.gpg /etc/apt/trusted.gpg.d/microsoft.gpg
		sudo sh -c 'echo "deb [arch=amd64] https://packages.microsoft.com/repos/vscode stable main" > /etc/apt/sources.list.d/vscode.list'
	fi

	sudo apt install -y code vlc mpv
fi

cp ./libinput-gestures.conf ~/.config/
(cd ./xorg && ./SETUP)

if [ "$1" == "first" ]; then
	sudo shutdown -r now
fi