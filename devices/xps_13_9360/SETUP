#!/bin/bash

mkdir -p ~/Pictures/Wallpapers ~/Pictures/Screenshots ~/Projects

sudo apt update && sudo apt upgrade -y

if [ "$1" == "first" ]; then
	sudo apt install -y curl

	curl https://packages.microsoft.com/keys/microsoft.asc | gpg --dearmor > microsoft.gpg
	sudo mv microsoft.gpg /etc/apt/trusted.gpg.d/microsoft.gpg
	sudo sh -c 'echo "deb [arch=amd64] https://packages.microsoft.com/repos/vscode stable main" > /etc/apt/sources.list.d/vscode.list'

	sudo apt update && sudo apt install -y libinput-tools xdotool wmctrl i3 build-essential make cpanminus autoconf automake feh pavucontrol leafpad xbacklight speedtest-cli xclip code default-jre gimp gpick openssh-server ffmpeg arp-scan scrot zenity youtube-dl

	(cd ../../gnome-terminal && ./SETUP)
	(cd ../../fonts && ./SETUP)

	(cd ./xorg && ./SETUP)
	sudo cp ./etc/grub /etc/default/ && sudo update-grub2

	gsettings set org.gnome.desktop.peripherals.touchpad tap-to-click false
	gsettings set org.gnome.desktop.peripherals.touchpad tap-and-drag false
	gsettings set org.gnome.desktop.peripherals.touchpad speed 0.6
	gsettings set org.gnome.desktop.interface scaling-factor 2
	gsettings set org.gnome.desktop.interface text-scaling-factor 1.1
	gsettings set org.gnome.desktop.background show-desktop-icons false

	sudo gpasswd -a $USER input

	(cd ~/Projects && git clone https://github.com/bulletmark/libinput-gestures.git)
	(cd ~/Projects/libinput-gestures && sudo make install && cp /etc/libinput-gestures.conf ~/.config/ && libinput-gestures-setup autostart)

	curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.11/install.sh | bash

	nvm install --lts
fi

cp ./.profile ~/
cp ./libinput-gestures.conf ~/.config/
cp ./.wallpaper_subreddits ~/Pictures/Wallpapers/.subreddits

(cd ../../scripts && ./SETUP)