#!/bin/bash

if [ ! -e $HOME/.config/device ]; then
	echo "No valid device file!"
	exit 1
fi

device=$(cat $HOME/.config/device)
dotfiles_folder=$HOME/Projects/dotfiles
device_folder=$dotfiles_folder/devices/$device

if [ "$1" == "first" ]; then
	sudo cp $device_folder/etc/grub /etc/default/ && sudo update-grub2

	git config --global user.name "fatlard1993"
	git config --global user.email "fatlard1993@gmail.com"

	cd $HOME/Projects

	$dotfiles_folder/scripts/cloneProjects Medeina zelda home-page wallpaper-manager

	git clone https://github.com/bulletmark/libinput-gestures.git

	cd $HOME/Projects/libinput-gestures && sudo make install && libinput-gestures-setup autostart

	mkdir -p $HOME/Projects/symetrix

	cd $HOME/Projects/symetrix

	$dotfiles_folder/scripts/cloneProjects control-server touch-panel control control-net control-app dsp-web-interface control-server-mother-hub font-manager event-scheduler symvue mixer config-parser symetrix-web-common voip-webadmin symetrix-tcp-tester symetrix-theme

	cd $HOME/Projects/lib

	$dotfiles_folder/scripts/cloneProjects eslint-config-rules log js-util dom config-manager fs-extended socket-client xml dialog websocket-server menu notify http-server color-picker

	$dotfiles_folder/vscode/SETUP
fi

sudo apt install -y gimp gpick code vlc mpv mongodb

cp $device_folder/libinput-gestures.conf $HOME/.config/

$device_folder/xorg/SETUP